name: custom:com.hashicorp.vault
version: 0.0.15
minDynatraceVersion: "1.227"
author:
  name: Aaron Philipose

metrics:
  - key: com.hashicorp.vault.go_gc_duration_seconds
    metadata: 
      displayName: Go Garbage Collection Duration (S)
      unit: Second
  - key: com.hashicorp.vault.go_goroutines
    metadata: 
      displayName: Current GoRoutines Running
      unit: Unspecified
  - key: com.hashicorp.vault.go_info
    metadata: 
      displayName: Information about the Go environment
      unit: Unspecified
  - key: com.hashicorp.vault.vault_barrier_get
    metadata: 
      displayName: Vault Barrier Get
      unit: Second
  - key: com.hashicorp.vault.vault_barrier_get_sum
    metadata: 
      displayName: Vault Barrier Get Sum
      unit: Second
  - key: com.hashicorp.vault.vault_barrier_get_count
    metadata: 
      displayName: Vault Barrier Get Count
      unit: Count
  - key: com.hashicorp.vault.vault_runtime_sys_bytes
    metadata: 
      displayName: Vault Runtime Bytes
      unit: Byte
  - key: com.hashicorp.vault.vault_runtime_heap_objects
    metadata: 
      displayName: Vault Runtime Heap Objects
      unit: Unspecified


prometheus:
  - group: vault metrics 
    interval:
      minutes: 1
    featureSet: all
    subgroups:
      - subgroup: vault go
        featureSet: go
        metrics:
          - key: com.hashicorp.vault.go_gc_duration_seconds
            value: metric:go_gc_duration_seconds
            type: gauge
          - key: com.hashicorp.vault.go_goroutines
            value: metric:go_goroutines
            type: gauge
          - key: com.hashicorp.vault.go_info
            value: metric:go_info
            type: gauge
      - subgroup: vault barrier
        metrics:
          - key: com.hashicorp.vault.vault_barrier_get
            value: metric:vault_barrier_get
            type: gauge
            featureSet: barrier
          - key: com.hashicorp.vault.vault_barrier_get_sum
            value: metric:vault_barrier_get_sum
            type: gauge
            featureSet: barrier
          - key: com.hashicorp.vault.vault_barrier_get_count
            value: metric:vault_barrier_get_count
            type: count
            featureSet: barrier
      - subgroup: vault runtime
        featureSet: runtime
        metrics:
          - key: com.hashicorp.vault.vault_runtime_sys_bytes
            value: metric:vault_runtime_sys_bytes
            type: gauge
            featureSet: runtime
          - key: com.hashicorp.vault.vault_runtime_heap_objects
            value: metric:vault_runtime_heap_objects
            type: gauge
            featureSet: runtime
