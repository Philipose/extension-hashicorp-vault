name: custom:com.hashicorp.vault
version: 0.0.12
minDynatraceVersion: "1.227"
author:
  name: Aaron Philipose

metrics:
  - key: com.hashicorp.vault.vault_barrier_get
    metadata: 
      displayName: Vault Barrier Get
      unit: Second
  - key: com.hashicorp.vault.vault_barrier_get_sum
    metadata: 
      displayName: Vault Barrier Get Sum
      unit: Second
  - key: com.hashicorp.vault.vault_barrier_get_count
    metadata: 
      displayName: Vault Barrier Get Count
      unit: Count
  - key: com.hashicorp.vault.vault_runtime_sys_bytes
    metadata: 
      displayName: Vault Barrier Get Count
      unit: Bytes


prometheus:
  - group: vault metrics 
    interval:
      minutes: 1
    featureSet: all
    subgroups:
      - subgroup: vault barrier
        metrics:
          - key: com.hashicorp.vault.vault_barrier_get
            value: metric:vault_barrier_get
            type: gauge
            featureSet: barrier
          - key: com.hashicorp.vault.vault_barrier_get_sum
            value: metric:vault_barrier_get_sum
            type: gauge
            featureSet: barrier
          - key: com.hashicorp.vault.vault_barrier_get_count
            value: metric:vault_barrier_get_count
            type: count
            featureSet: barrier
      - subgroup: vault runtime
        featureSet: runtime
        metrics:
          - key: com.hashicorp.vault.vault_runtime_sys_bytes
            value: metric:vault_runtime_sys_bytes
            type: gauge
            featureSet: runtime
