name: custom:dtext-hashicorp-vault
version: 0.0.6
minDynatraceVersion: "1.227"
author:
  name: Aaron Philipose

metrics:
  - key: com.dtc.hashicorpvault.vault_barrier_get
    metadata: 
      displayName: Vault Barrier Get
      unit: Second
  - key: com.dtc.hashicorpvault.vault_barrier_get_sum
    metadata: 
      displayName: Vault Barrier Get Sum
      unit: Second

prometheus:
  - group: vault metrics 
    interval: 1m
    featureSet: all
    subgroups:
      - subgroup: vault barrier
        metrics:
          - key: com.dtc.hashicorpvault.vault_barrier_get
            value: metric:vault_barrier_get
            type: gauge
            featureSet: barrier
          - key: com.dtc.hashicorpvault.vault_barrier_get_sum
            value: metric:vault_barrier_get_sum
            type: gauge
            featureSet: barrier
